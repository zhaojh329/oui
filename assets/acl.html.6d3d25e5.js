import{_ as n,o as s,c as a,e}from"./app.9ff75c61.js";const t={},o=e(`<h1 id="acl" tabindex="-1"><a class="header-anchor" href="#acl" aria-hidden="true">#</a> ACL</h1><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p>Oui divides permissions into permission groups, and each permission group is divided into permission classes. Each permission class consists of multiple matching items. Each user needs to be assigned a permission group.</p><p>By default, Oui has a permission group named <code>admin</code>, whose configuration file is: /usr/share/oui/acl/admin.json</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;rpc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.+&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;menu&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.+&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ubus&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.+&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;uci&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.+&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Currently, there are four permission classes:</p><ul><li>rpc - <code>rpc</code> interface call permission</li><li>menu - Hidden or show menu</li><li>ubus - <code>ubus</code> call permission</li><li>uci - <code>uci</code> operating permission</li></ul><p>The matching items are an array, and all the matching items in the <code>admin</code> permission group are <code>.+ </code>, indicating any matching, that is, each category has all permissions.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>The match here is actually a regular expression. Can be any <code>Lua</code> regular expression.</p></div><h2 id="reverse-matching" tabindex="-1"><a class="header-anchor" href="#reverse-matching" aria-hidden="true">#</a> Reverse matching</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;rpc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^uci.get$&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;reverse&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Set the <code>reverse</code> attribute of the permission class to <code>true</code> to reverse the matching.</p><h2 id="examples-of-matches" tabindex="-1"><a class="header-anchor" href="#examples-of-matches" aria-hidden="true">#</a> Examples of matches</h2><h3 id="rpc" tabindex="-1"><a class="header-anchor" href="#rpc" aria-hidden="true">#</a> rpc</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;rpc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.+&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Matches all <code>rpc</code> interfaces</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;rpc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^uci%..+&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Matches all methods in the <code>uci</code> module</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;rpc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^uci%..+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;^system%..+&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Matches all methods in the <code>uci</code> and <code>system</code> modules</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;rpc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^uci%.get$&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Matches the <code>get</code> method in the <code>uci</code> module</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;rpc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^uci%.get$&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;reverse&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Does not match the <code>get</code> method of the <code>uci</code> module, that is, except the <code>get</code> method of the <code>uci</code> module cannot be called, all other interfaces can be called.</p><h3 id="menu" tabindex="-1"><a class="header-anchor" href="#menu" aria-hidden="true">#</a> menu</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;menu&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^/system/&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Matches menus starting with <code>/system/</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;menu&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^/system/upgrade$&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Match <code>/system/upgrade</code> menu</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;menu&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^/system/upgrade$&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;reverse&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Hide the <code>/system/upgrade</code> menu</p><h3 id="uci" tabindex="-1"><a class="header-anchor" href="#uci" aria-hidden="true">#</a> uci</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;uci&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;matchs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;^system$&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Only <code>/etc/config/system</code> is allowed</p>`,34),p=[o];function c(i,u){return s(),a("div",null,p)}const r=n(t,[["render",c],["__file","acl.html.vue"]]);export{r as default};
